<!-- //로긴, 로그아웃, 회원가입, 마이페이지 버튼 관련된 html -->


<script>

init()
$('#btn-logout').click(LogOut);

function init(){
  // 쿠키에서 토큰 가져와본다.
  var token = getCookie('token');

  // 있으면 로긴  됬다는거 니까 알맞은 버튼 보여주고
  if (token){
      $('#a-login').hide();
      $('#a-signup').hide();
  }
  //없으면 로긴 안됬다는 거니까 알맞은 버튼 보여준다.
  else{
    $('#btn-logout').hide();
    $('#a-mypage').hide();
  }
}

function LogOut(){
  var token = getCookie('token');
  if (token){
    // api 서버에 요청 보내서 쿠키 삭제
    axios({
        url: 'http://localhost:8000/api/members/logout',
        headers: {
          'Authorization': 'Token ' + getCookie('token')
        }
      })
      .then(function(response){
        console.log(response)
        // 브라우저 에서 쿠키 삭제
        setCookie('token', '', '-1');
        window.location.reload()
      })
      .catch(function(error){
        console.log(error)
    });



  }
  else{
  }

}
</script>


<div class="content2">

  <div style="float:left; display:inline-block; padding:10px 10px;" >
          <a id="a-login" href="login_page.html" class="btn btn-primary" >Login</a>
  </div>

  <div style="float:left; display:inline-block; padding:10px 10px;" >
          <a id="a-signup" href="signup_page.html" class="btn btn-primary" >회원가입</a>
  </div>

  <div style="float:left; display:inline-block; padding:10px 10px;" >
          <button id="btn-logout" type="submit" class="btn btn-primary" >Logout</button>
  </div>

  <div style="float:left; display:inline-block; padding:10px 10px;" >
          <a id="a-mypage" href="my_page.html" class="btn btn-primary" >My Page</a>
  </div>

</div>
